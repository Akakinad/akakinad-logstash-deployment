# Logstash Configuration File
# Generated by Ansible for {{ inventory_hostname }}

# Node Configuration
node.name: "{{ inventory_hostname }}"

# Paths
path.data: "{{ logstash_data_dir }}"
path.logs: "{{ logstash_log_dir }}"
path.settings: "{{ logstash_config_dir }}"

# Pipeline Configuration
pipeline.id: main
pipeline.workers: {{ ansible_processor_vcpus | default(2) }}
pipeline.batch.size: 125
pipeline.batch.delay: 50

# API Settings
api.http.host: "0.0.0.0"
api.http.port: 9600
api.environment: "{{ environment | default('development') }}"

# Logging Configuration
log.level: info
slowlog.threshold.warn: 2s
slowlog.threshold.info: 1s
slowlog.threshold.debug: 500ms
slowlog.threshold.trace: 100ms

# Queue Configuration
queue.type: memory
queue.max_events: 0
queue.max_bytes: 1gb

# Dead Letter Queue
dead_letter_queue.enable: true
dead_letter_queue.max_bytes: 1gb

# Monitoring
monitoring.enabled: false

# X-Pack Settings (if available)
xpack.monitoring.enabled: false

# Configuration Auto-reload
config.reload.automatic: true
config.reload.interval: 3s

# Pipeline Configuration
path.config: "{{ logstash_config_dir }}/conf.d/*.conf"

# Metric Configuration
metric.collect: true

# HTTP API Settings
api.ssl.enabled: false

# Log Format
log.format: plain

# Unsafe Shutdown Protection
pipeline.unsafe_shutdown: false

# JVM Settings
config.support_escapes: false